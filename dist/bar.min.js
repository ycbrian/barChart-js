"use strict";function BarChart(t,a,e,r){var i=this;i.configureChart(t,a,e,r),i.performPreOperations(),i.drawChart()}function getRandomInt(t,a){return t=Math.ceil(t),a=Math.floor(a),Math.floor(Math.random()*(a-t))+t}BarChart.prototype.configureChart=function(t,a,e,r){this.setCanvasParameters(t,a,e,r),this.setChartParameters()},BarChart.prototype.setCanvasParameters=function(t,a,e,r){var i=this;i.id=t,i.width=a,i.height=e,i.data=r},BarChart.prototype.setChartParameters=function(){var t=this;t.axisRatio=10,t.verticalMargin=t.height*t.axisRatio/100,t.horizontalMargin=t.width*t.axisRatio/100,t.axisColor="black",t.axisWidth=.75,t.fontRatio=3,t.fontFamily="times",t.fontStyle="normal",t.fontWeight="300",t.fontColor="#666",t.verticalFontSize=t.height*t.fontRatio/100,t.horizontalFontSize=t.width*t.fontRatio/100,t.guidelineColor="#ccc",t.guidelineWidth=.5},BarChart.prototype.performPreOperations=function(){var t=this;t.createCanvas(),t.handleData(),t.prepareData(),console.log(t)},BarChart.prototype.createCanvas=function(){var t=this,a=document.createElement("canvas");a.id=t.id+"-"+Math.random(),a.width=t.width,a.height=t.height,document.getElementById(t.id).innerHTML="",document.getElementById(t.id).appendChild(a),t.canvas=a,t.context=a.getContext("2d")},BarChart.prototype.handleData=function(){var a=this;a.labels=[],a.values=[],a.data.forEach(function(t){a.labels.push(t.label),a.values.push(t.value)})},BarChart.prototype.prepareData=function(){var t=this;t.itemsNum=t.data.length,t.maxValue=Math.max.apply(null,t.values),t.minValue=Math.min.apply(null,t.values),t.verticalAxisWidth=t.height-2*t.verticalMargin,t.horizontalAxisWidth=t.width-2*t.horizontalMargin,t.verticalUpperBound=10*Math.ceil(t.maxValue/10),t.verticalLabelFreq=t.verticalUpperBound/t.itemsNum,t.horizontalLabelFreq=t.horizontalAxisWidth/t.itemsNum},BarChart.prototype.drawChart=function(){var t=this;t.drawVerticalAxis(),t.drawVerticalLabels(),t.drawHorizontalAxis(),t.drawHorizontalLabels(),t.drawHorizontalGuidelines(),t.drawVerticalGuidelines(),t.drawBars()},BarChart.prototype.drawVerticalAxis=function(){var t=this;t.context.beginPath(),t.context.strokeStyle=t.axisColor,t.context.lineWidth=t.axisWidth,t.context.moveTo(t.horizontalMargin,t.verticalMargin),t.context.lineTo(t.horizontalMargin,t.height-t.verticalMargin),t.context.stroke()},BarChart.prototype.drawVerticalLabels=function(){var t=this,a=t.fontStyle+" "+t.fontWeight+" "+t.verticalFontSize+"px"+t.fontFamily;t.context.font=a,t.context.textAlign="right",t.context.fillStyle=t.fontColor,t.scaledVerticalLabelFreq=t.verticalAxisWidth/t.verticalUpperBound*t.verticalLabelFreq;for(var e=0;e<=t.itemsNum;++e){var r=t.verticalUpperBound-e*t.verticalLabelFreq,i=t.horizontalMargin-t.horizontalMargin/t.axisRatio,o=t.verticalMargin+e*t.scaledVerticalLabelFreq;t.context.fillText(r,i,o)}},BarChart.prototype.drawHorizontalAxis=function(){var t=this;t.context.beginPath(),t.context.strokeStyle=t.axisColor,t.context.lineWidth=t.axisWidth,t.context.moveTo(t.horizontalMargin,t.height-t.verticalMargin),t.context.lineTo(t.width-t.horizontalMargin,t.height-t.verticalMargin),t.context.stroke()},BarChart.prototype.drawHorizontalLabels=function(){var t=this,a=t.fontStyle+" "+t.fontWeight+" "+t.verticalFontSize+"px"+t.fontFamily;t.context.font=a,t.context.textAlign="center",t.context.textBaseline="top",t.context.fillStyle=t.fontColor;for(var e=0;e<t.itemsNum;++e){var r=t.horizontalMargin+e*t.horizontalLabelFreq+t.horizontalLabelFreq/2,i=t.height-t.verticalMargin+t.verticalMargin/t.axisRatio;t.context.fillText(t.labels[e],r,i)}},BarChart.prototype.drawHorizontalGuidelines=function(){var t=this;t.context.strokeStyle=t.guidelineColor,t.context.lineWidth=t.guidelineWidth,t.scaledVerticalLabelFreq=t.verticalAxisWidth/t.verticalUpperBound*t.verticalLabelFreq;for(var a=0;a<=t.itemsNum;++a){var e=t.horizontalMargin,r=t.verticalMargin+a*t.scaledVerticalLabelFreq,i=t.horizontalMargin+t.horizontalAxisWidth,o=t.verticalMargin+a*t.scaledVerticalLabelFreq;t.context.beginPath(),t.context.moveTo(e,r),t.context.lineTo(i,o),t.context.stroke()}},BarChart.prototype.drawVerticalGuidelines=function(){var t=this;t.context.strokeStyle=t.guidelineColor,t.context.lineWidth=t.guidelineWidth;for(var a=0;a<=t.itemsNum;++a){var e=t.horizontalMargin+a*t.horizontalLabelFreq,r=t.height-t.verticalMargin,i=t.horizontalMargin+a*t.horizontalLabelFreq,o=t.verticalMargin;t.context.beginPath(),t.context.moveTo(e,r),t.context.lineTo(i,o),t.context.stroke()}},BarChart.prototype.drawBars=function(){for(var t=this,a=0;a<t.itemsNum;++a){t.context.beginPath();var e=t.createRandomRGBColor(),r="rgba("+e.r+", "+e.g+", "+e.b+", 0.7)",i="rgb("+e.r+", "+e.g+", "+e.b+")",o=t.horizontalMargin+a*t.horizontalLabelFreq+t.horizontalLabelFreq/4,n=t.height-t.verticalMargin,l=t.horizontalLabelFreq-2*t.horizontalLabelFreq/4,h=-1*t.verticalAxisWidth*t.values[a]/t.maxValue;t.context.fillStyle=r,t.context.strokeStyle=i,t.context.rect(o,n,l,h),t.context.stroke(),t.context.fill()}},BarChart.prototype.createRandomRGBColor=function(){return{r:getRandomInt(0,257),g:getRandomInt(0,257),b:getRandomInt(0,257)}};